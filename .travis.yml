language: python

python:
  - 2.7
  - 3.4
  - 3.5
  - 3.6
  - 3.7

addons:
  apt:
    sources:
      - deadsnakes
    packages:
      - python3.5

cache:
  directories:
    - $HOME/.cache/pip
before_cache:
  - rm -f $HOME/.cache/pip/log/debug.log
matrix:
    include:
      # py27
      - python: 2.7
        env: TOX_ENV=py27-django18
      - python: 2.7
        env: TOX_ENV=py27-django19
      - python: 2.7
        env: TOX_ENV=py27-django110
      - python: 2.7
        env: TOX_ENV=py27-django111
      # py34
      - python: 3.4
        env: TOX_ENV=py34-django111
      - python: 3.4
        env: TOX_ENV=py34-django20
      - python: 3.4
        env: TOX_ENV=py34-django21
      # py35
      - python: 3.5
        env: TOX_ENV=py35-django111
      - python: 3.5
        env: TOX_ENV=py35-django20
      - python: 3.5
        env: TOX_ENV=py35-django21
      # py36
      - python: 3.6
        env: TOX_ENV=py36-django111
      - python: 3.6
        env: TOX_ENV=py36-django20
      - python: 3.6
        env: TOX_ENV=py36-django21
      # py37
      - python: 3.7
        env: TOX_ENV=py37-django111
      - python: 3.7
        env: TOX_ENV=py37-django20
      - python: 3.7
        env: TOX_ENV=py37-django21

script: tox -e $TOX_ENV

install:
  - pip install pip setuptools wheel -U
  - pip install beautifulsoup4
  - pip install coveralls
  - pip install tox
  - python setup.py -q install

script:
  - tox

after_success:
  - coveralls
